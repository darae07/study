# 트리

## 트리

- 리스트, 스택, 큐 등은 선형 구조
- 트리: 계층적인 구조를 나타내는 자료구조
- 트리는 부모-자식 관계의 노드들로 이루어진다.
- 하나의 루트 노드를 갖는다.
- 사이클이 없는 단방향 그래프이다.

## 트리의 용어

- 노드: 트리의 구성 요소
- 루트: 부모가 없는 노드
- 서브트리: 하나의 노드와 그 노드들의 자손들로 이루어진 트리
- 레벨: 트리 각 층의 번호
- 높이: 트리의 최대 레벨
- 차수: 노드가 가지고 있는 자식 노드의 개수
- 사이클이 없는 단방향 그래프

## 이진 트리

- 모든 노드가 2개의 서브 트리를 가지고 있는 트리
- 모든 노드의 차수가 2 이하

## 이진 트리의 성질

- 노드의 개수가 n개이면 간선의 개수는 n-1
- 높이가 h인 이진트리의 경우 최소 h개의 노드를 가지며 최대 2\*\*n-1개의 노드를 가진다.
- n개의 노드를 가지는 이진트리의 높이
  - 최대 n
  - 최소 log 2 (n+1)

## 이진트리의 분류

- 포화 이진 트리
- 완전 이진 트리
- 기타 이진 트리

### 포화 이진 트리

- 모든 노드의 차수가 2인 트리
- 노드의 개수가 2\*\*(k-1)이다.

### 완전 이진 트리

- 높이가 h일때 레벨 0부터 h-1까지 모든 노드가 두개씩 채워져있고 레벨 h는 왼쪽부터 노드가 채워져있는 트리

## 이진트리의 표현

- 배열을 이용하는 방법과 포인터를 이용하는 방법
- 배열 표현법: 모든 이진 트리를 포화 이진 트리라고 가정하고 각 노드에 번호를 붙여서 그 번호를 배열의 인덱스로 삼아 노드의 데이터를 배열에 저장하는 방법
- 노드i의 부모 노드 인덱스 = i/2
- 노드i의 왼쪽 자식 노드 인덱스 = 2i
- 노드i의 오른쪽 자식 노드 인덱스 = 2i+1

## 링크 표현법

- 링크 표현법: 포인터를 이용하여 부모노드가 자식노드를 가리키게 하는 방법
- 노드는 구조체로 표현
- 링크는 포인터로 표현

## 이진 트리의 순회

- 순회: 트리의 노드들을 체계적으로 방문하는 것
- 3가지의 기본적인 순회방법
  - 전위순회: n->l->r
  - 중위순회: l->n->r
  - 후위순회: l->r->n

## 레벨 순회

- 각 노드를 레벨 순으로 검사하는 방법
- 큐를 사용하는 순회 방법

## 수식 트리

- 산술식을 트리 형태로 표현한 것
- 비단말노드: 연산자
- 단말노드: 피연산자

## 이진트리 연산

### 노드 개수

- 각각의 서브트리에 대하여 순환 호출을 한 다음, 반환되는 값에 1을 더하여 반환

### 높이

- 서브트리에 대하여 순환호출하고 서브 트리들의 반환값 중에서 최대값에 1을 더하야 반환

### 단말 노드 개수

- 각각의 서브트리에 대하여 순환 호출한 값을 더하여 반환하고, 자식이 없는 리프 노드일 경우 1을 반환

## 스레드 이진 트리

- 가리키는 곳이 없는 모든 오른쪽 null 포인터를 중위 후속자 노드로 연결하고, 가리키는 곳이 없는 모든 왼쪽 null 포인터를 중위 선행자 노드로 연결한 것
- null 링크에 중위 순회시에 후속 노드인 중위 후속자를 저장시켜 놓은 트리가 스레드 이진 트리
- 단말 노드와 비단말 노드의 구별을 위하여 is_thread 필드 필요
- 중위 후속자를 찾는 함수 작성
  - 노드의 오른쪽 포인터가 null이거나 스레드이면 오른쪽 포인터를 반환
  - 만약 오른쪽 자식이면 다시 가장 왼쪽 노드로 이동
- 스레드 버전 중위 순회 함수 작성

## 이진 탐색 트리

- 탐색 작업을 효율적으로 하기 위한 자료구조
- 모든 노드에 대해 왼쪽 서브트리 값 <= 루트 값 < 오른쪽 서브트리 값
- 이진탐색을 중위순회하면 오름차순으로 정렬된 값을 얻을 수 있다.

## 이진 탐색 트리에서의 탐색 연산

- 찾는값 key, 노드값 v
- key == v 탐색 종료
- key < v 왼쪽 서브트리 검색
- key > v 오른쪽 서브트리 검색

## 탐색 구현 방법

- 반복: while문 이용
- 순환: 재귀함수 호출

## 이진 탐색 트리에서의 삽입 연산

- 이진 탐색 트리에 원소를 삽입하기 위해서는 먼저 탐색을 수행하는 것이 필요
- 탐색에 실패한 위치가 새로운 노드를 삽입하는 위치
- insert_node 함수: 트리를 순환적으로 내려가면서 재정의한 루트 포인터를 반환

## 이진 탐색 트리에서의 삭제 연산

- 삭제하려는 노드가 단말 노드일 경우 -> 연결 해제
- 삭제하려는 노드의 서브트리가 (방향 관계 없이) 하나인 경우 -> 삭제하려는 노드의 서브트리를 부모노드에 붙여준다.
- 삭제하려는 노드의 서브트리가 두개인 경우
  - 삭제하려는 노드의 가장 가까운 값(왼쪽 서브트리에서 제일 큰 값 혹은 오른쪽 서브트리에서 제일 작은 값)을 삭제노드 위치로 가져온다.

## 이진 탐색 트리의 성능 분석

- 이진 탐색 트리에서의 탐색, 삽입, 삭제 연산의 시간복잡도는 트리의 높이를 h라고 했을때 h에 비례한다. log n
- 최선 - 이진트리가 균형적인 경우: h = log n
- 최악 - 편향이진트리: h = n. 순차탐색과 시간복잡도가 같다.

## 힙

- 최소힙과 최대힙은 원소의 정렬만 반대일 뿐 완전히 동일하다.
- 최소힙을 기준으로 설명하면 항상 루트는 최솟값을 가지며 각 노드의 원소가 자식들의 원소보다 작다는 특성을 가진다.
- 삽입/삭제에는 트리의 특성을 만족시키기 위해 O(log n)시간이 걸린다.
- 삽입시 맨 우측에 요소를 삽입하고 트리의 특성을 만족시킬 때까지 부모와 위치를 바꾸고 이는 최대 O(log n)시간이 걸린다.
- 삭제시 루트 요소를 삭제하고 마지막 원소를 루트로 가져온 후, 트리의 특성을 만족하도록 자식 노드와 교환해 나간다.
